<div class="chat-container">
  <select [(ngModel)]="model">
    @for (mod of availableModels; track mod) {
      <option [value]="mod">{{ mod }}</option>
    }
  </select>

  <div class="messages">
    @for (msg of messages; track $index; let i = $index) {
      <app-chat-bubble [msg]="msg" [isLastAssistant]="msg.role === 'assistant' && i === messages.length - 1"
                       (generateImage)="generateSdImage(i)"
                       (regenerate)="regenerateMessage(i)">
      </app-chat-bubble>
    }
  </div>

  <!-- Image display -->
  @if (isGeneratingImage) {
    <p>Generating image...</p>
  }
  @if (generatedImage) {
    <img [src]="generatedImage" alt="Generated SD Image" style="max-width: 100%; margin-top: 10px;">
  }

  <input type="text" [(ngModel)]="userInput" placeholder="Type your message..." (keyup.enter)="sendMessage()" />
  <button (click)="sendMessage()">Send</button>
</div>
